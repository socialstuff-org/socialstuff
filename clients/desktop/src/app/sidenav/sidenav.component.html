<mat-sidenav-container id="sidenav-container">
  <mat-sidenav #sidenav mode="side" opened id="sidenav">
    <mat-list>
      <div *ngIf="loadingContacts; else chatList">loading chats...</div>
      <ng-template #chatList>
        <mat-divider class="contact-list-divider"></mat-divider>

        <section style="background-color: #510A32; margin-top: 10px; margin-bottom: 10px; text-align: center;">
          <div class="profile-picture">
            <span *ngIf="username">{{acronym(username)}}</span>
          </div>
          <div class="username" style="text-align: left;">
            <div>
              Logged in as:<br>
              @{{username}}
            </div>
          </div>
        </section>

        <mat-divider class="contact-list-divider"></mat-divider>

        <div style="margin-top: 10px"></div>

        <div style="text-align: center;">
          <input type="text" placeholder="search contact ..." id="search-bar" [(ngModel)]="searchTerm" (change)="searchContacts()" />
        </div>

        <div style="margin-top: 10px"></div>

        <mat-divider class="contact-list-divider"></mat-divider>
        <mat-list-item routerLinkActive="active-list-item" class="contactListItem" *ngFor="let chat of chats">
          <mat-divider class="contact-list-divider"></mat-divider>
          <a class="sidenav-link" [routerLink]="['/chat-app', chat.username]" routerLinkActive="active-link-item">
            <div style="width: 100%;">
              <div class="profile-picture">
                <span *ngIf="chat.displayName; else noRealName">{{acronym(chat.displayName)}}</span>
                <ng-template #noRealName>
                  <mat-icon style="margin-top: 7px;">person</mat-icon>
                </ng-template>
              </div>
              <div class="username">
                <div>
                  {{chat.displayName || ('@' + chat.username)}}
                </div>
                <div *ngIf="chat.lastMessage">
                  {{chat.lastMessage.message | slice: 0:50}}
                </div>

              </div>
            </div>
          </a>
          <mat-divider class="contact-list-divider"></mat-divider>
        </mat-list-item>
      </ng-template>
      <div style="text-align: center; margin-top: 10px;">
        <span *ngIf="chats.length === 0" style="font-style: italic;">No contacts found.</span>
      </div>


    </mat-list>
  </mat-sidenav>

</mat-sidenav-container>
